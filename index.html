<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>寝首 - 忍者アクションゲーム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- ゲーム画面 -->
    <div id="game-container">
        <!-- タイトル画面 -->
        <div id="title-screen">
            <h1>寝首</h1>
            <p>忍者となって城に忍び込み<br>殿の首を討て！</p>
            <button id="start-button">ゲーム開始</button>
            <div class="instructions">
                <p>操作方法：</p>
                <p>← → : 移動　↑ : ジャンプ　□ : 火炎弾</p>
            </div>
        </div>

        <!-- メインゲーム画面 -->
        <div id="game-screen" style="display: none;">
            <!-- ゲーム情報 -->
            <div id="game-ui">
                <div id="life-display">❤️ <span id="life-count">3</span></div>
                <div id="floor-display">階数: <span id="current-floor">1</span>/5</div>
                <div id="score-display">スコア: <span id="score">0</span></div>
            </div>

            <!-- ゲームエリア -->
            <canvas id="game-canvas"></canvas>

            <!-- スマホ用コントローラー -->
            <div id="mobile-controller">
                <div class="control-row">
                    <button class="control-btn" id="btn-left">←</button>
                    <button class="control-btn" id="btn-right">→</button>
                    <button class="control-btn" id="btn-jump">↑</button>
                    <button class="control-btn" id="btn-attack">□</button>
                </div>
            </div>
        </div>

        <!-- ゲームオーバー画面 -->
        <div id="gameover-screen" style="display: none;">
            <h2>ゲームオーバー</h2>
            <p id="final-score">スコア: 0</p>
            <button id="restart-button">もう一度</button>
        </div>

        <!-- クリア画面 -->
        <div id="clear-screen" style="display: none;">
            <h2>ミッション完了！</h2>
            <p>殿の首を討った！</p>
            <p id="clear-score">最終スコア: 0</p>
            <button id="play-again-button">もう一度</button>
        </div>
    </div>

    <!-- SVGキャラクター定義 -->
    <div id="svg-definitions" style="display: none;">
        <!-- 忍者 -->
        <svg id="ninja-svg" width="40" height="40" viewBox="0 0 40 40">
            <rect x="12" y="15" width="16" height="20" fill="#1a1a1a" rx="3"/>
            <circle cx="20" cy="12" r="8" fill="#1a1a1a"/>
            <rect x="16" y="10" width="3" height="2" fill="#ffffff"/>
            <rect x="21" y="10" width="3" height="2" fill="#ffffff"/>
        </svg>

        <!-- 侍 -->
        <svg id="samurai-svg" width="45" height="45" viewBox="0 0 45 45">
            <rect x="15" y="20" width="15" height="18" fill="#cc3333" rx="2"/>
            <circle cx="22.5" cy="15" r="7" fill="#ffdbab"/>
            <ellipse cx="22.5" cy="10" rx="4" ry="3" fill="#333333"/>
            <rect x="21" y="5" width="3" height="8" fill="#333333"/>
            <line x1="35" y1="15" x2="35" y2="30" stroke="#666666" stroke-width="2"/>
            <rect x="33" y="12" width="4" height="3" fill="#8b4513"/>
        </svg>

        <!-- 弓兵 -->
        <svg id="archer-svg" width="42" height="42" viewBox="0 0 42 42">
            <rect x="14" y="18" width="14" height="17" fill="#3366cc" rx="2"/>
            <circle cx="21" cy="13" r="6" fill="#ffdbab"/>
            <path d="M5 10 Q8 15 5 20" stroke="#8b4513" stroke-width="2" fill="none"/>
            <line x1="5" y1="10" x2="5" y2="20" stroke="#333333"/>
        </svg>

        <!-- 槍兵 -->
        <svg id="spearman-svg" width="45" height="45" viewBox="0 0 45 45">
            <rect x="14" y="20" width="17" height="18" fill="#228b22" rx="2"/>
            <circle cx="22.5" cy="15" r="7" fill="#ffdbab"/>
            <line x1="35" y1="15" x2="45" y2="5" stroke="#8b4513" stroke-width="2"/>
            <line x1="45" y1="5" x2="45" y2="25" stroke="#c0c0c0" stroke-width="2"/>
        </svg>

        <!-- 盾兵 -->
        <svg id="shieldman-svg" width="45" height="45" viewBox="0 0 45 45">
            <rect x="14" y="20" width="17" height="18" fill="#555555" rx="2"/>
            <circle cx="22.5" cy="15" r="7" fill="#ffdbab"/>
            <path d="M35 20 A8 8 0 0 1 35 36 A8 8 0 0 1 35 20" fill="#999999"/>
        </svg>

        <!-- 殿 -->
        <svg id="lord-svg" width="80" height="60" viewBox="0 0 80 60">
            <ellipse cx="40" cy="45" rx="35" ry="12" fill="#6b46c1"/>
            <ellipse cx="40" cy="35" rx="25" ry="15" fill="#7c3aed"/>
            <circle cx="25" cy="25" r="12" fill="#ffdbab"/>
            <path d="M15 20 Q20 15 30 18" fill="#333333"/>
            <line x1="20" y1="23" x2="24" y2="23" stroke="#333333" stroke-width="2"/>
            <text x="50" y="15" fill="#666666" font-size="8">ZZZ</text>
        </svg>

        <!-- 手裏剣 -->
        <svg id="shuriken-svg" width="20" height="20" viewBox="0 0 20 20">
            <polygon points="10,2 12,8 18,10 12,12 10,18 8,12 2,10 8,8" fill="#c0c0c0"/>
            <circle cx="10" cy="10" r="2" fill="#666666"/>
        </svg>

        <!-- 矢 -->
        <svg id="arrow-svg" width="30" height="4" viewBox="0 0 30 4">
            <line x1="0" y1="2" x2="25" y2="2" stroke="#8b4513" stroke-width="2"/>
            <polygon points="25,0 30,2 25,4" fill="#666666"/>
        </svg>
    </div>

    <audio id="bgm" src="audio/nekugi.mp3" loop autoplay></audio>

    <script src="script.js"></script>
</body>
</html>
